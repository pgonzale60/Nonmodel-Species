The genome_annotation.sh script contains the commands used to perform the annotation of a new genome assembly. The underlying structure is organized as listed below. The programs were non-default parameter values were used have these specificied inside parenthesis. 

1. Repeat identification with RepeatModeler v1.0.11.
2. Masking the genome assembly with Repeatmasker v.4.07 (`-gff -xsmall -norna`).
3. Using the tool Exonerate 2.47.3 (`--showvulgar no --softmaskquery yes --softmasktarget yes --minintron 20 --maxintron 3000 --showalignment no --showtargetgff yes --showcigar no --geneseed 250 --score 250 --verbose 0 --gff3 yes`), protein-coding gene models from the previous annotation were transferred to the new assembly by performing alignments of their predicted protein sequences. The script contains the AGAT commands (`-p --clean_final_stop --clean_internal_stop`) used to extract the proteins from the downloadable annotation file and query these against the assembly.
4. To upgrade previous gene models, RNA-sequencing data are used. We first trimmed the Illumina reads with Trimmommatic (`ILLUMINACLIP: adaptersE.fa:2:30:10 SLIDINGWINDOW:4:15 MINLEN:20`), making sure to remove the adapters and low quality bases. Then we mapped these reads against the genome with HISAT2 v2.1 and with samtools v1.09 (`-F 4 -F 8 -F 256`) discarded secondary alignments as well as records where one or both sequence reads per pair were unmapped. Transcript models were inferred from these alignments using StringTie v1.3.2d. The script contains the commands used to map the trimmed RNA-sequencing reads and to assemble them.
5. The tool PASA v2.3.3 is subsequently used to extend the gene models' UTRs when there are reads supporting transcription outside the gene models.
6. Downloaded miRNA and pre-miRNA sequences from RNAcentral and FlyBase were mapped using MapMi and GMAP.
7. In a last step, the script contains the respective commands to predict lncRNAs with FEELnc, miscellaneous ncRNAs with Rfam, tRNAs with tRNAscan, and rRNAs with RNAmmer.
